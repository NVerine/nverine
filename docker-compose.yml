version: '3'

services:
    # mysql:
    #     image: mysql:5.7
    #     container_name: mysql57
    #     ports:
    #         - "3307:3306"
    #     volumes:
    #         - mysql:/var/lib/mysql/
    #     environment:
    #         MYSQL_DATABASE: '${DB_NAME}'
    #         MYSQL_USER: '${DB_USER}'
    #         MYSQL_ROOT_PASSWORD: '${DB_PASS}'
    #     networks:
    #         - symfony
    php:
        build:
            context: .
            dockerfile: docker/php/Dockerfile
            args:
                TIMEZONE: "${TIMEZONE}"
                DB_HOST: "${DB_HOST}"
                DB_USER: "${DB_USER}"
                DB_PASS: "${DB_PASS}"
                DB_NAME: "${DB_NAME}"
        volumes:
            - ./symfony/:/var/www/symfony/
        environment:
            - APP=symfony
            - REP=https://github.com/NVerine/symfony.git
        networks:
            - symfony
    nginx:
        build:
            context: .
            dockerfile: docker/nginx/Dockerfile
        volumes:
            - ./symfony/:/var/www/symfony/
        ports:
            - 8080:80
        networks:
            - symfony

volumes:
    mysql:

networks:
    symfony:
